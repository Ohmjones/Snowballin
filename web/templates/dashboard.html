{{define "content"}}
<h1 class="ui inverted header">
    <i class="snowflake icon"></i>
    <div class="content">
        Bot Dashboard
        <div class="sub header">Live portfolio overview and active positions</div>
    </div>
</h1>

<!-- Configured asset pairs (buttons) -->
<div class="asset-button-row">
    <div class="ui tiny buttons">
        {{range .AssetPairs}}
        {{$dash := (replace . "/" "-" -1)}}
        <a class="ui button" href="/asset/{{$dash}}">{{.}}</a>
        {{end}}
    </div>
</div>

<!-- Top stats -->
<div class="ui two inverted statistics">
    <div class="statistic">
        <div class="value">
            <i class="dollar sign icon"></i>
            <span class="green-number">{{printf "%.2f" .Dashboard.PortfolioValue}}</span>
        </div>
        <div class="label">CURRENT ACCOUNT VALUE ({{.Dashboard.QuoteCurrency}})</div>
    </div>
    <div class="statistic">
        <div class="value">
            {{if ge .Dashboard.TotalUnrealizedPL 0.0}}
            <span class="green-number">{{printf "%.2f" .Dashboard.TotalUnrealizedPL}}</span>
            {{else}}
            <span class="red-number">{{printf "%.2f" .Dashboard.TotalUnrealizedPL}}</span>
            {{end}}
        </div>
        <div class="label">TOTAL UNREALIZED P/L</div>
    </div>
</div>

<!-- Active Positions -->
<h3 class="ui inverted dividing header">Active Positions ({{len .Dashboard.ActivePositions}})</h3>
<div class="ui inverted segment">
    <table class="ui very basic inverted selectable compact table">
        <thead>
        <tr>
            <th>Asset Pair</th>
            <th class="right aligned">Avg. Entry Price</th>
            <th class="right aligned">Total Volume</th>
            <th class="right aligned">Unrealized P/L</th>
            <th class="right aligned">Unrealized P/L %</th>
            <th class="right aligned">Take Profit Price</th>
        </tr>
        </thead>
        <tbody>
        {{if .Dashboard.ActivePositions}}
        {{range $pair, $pos := .Dashboard.ActivePositions}}
        <tr>
            <td>{{$pair}}</td>
            <td class="right aligned">{{printf "%.8f" $pos.AveragePrice}}</td>
            <td class="right aligned">{{printf "%.6f" $pos.TotalVolume}}</td>
            <td class="right aligned">
                {{if ge $pos.UnrealizedPL 0.0}}
                <span class="green-number">{{printf "%.2f" $pos.UnrealizedPL}}</span>
                {{else}}
                <span class="red-number">{{printf "%.2f" $pos.UnrealizedPL}}</span>
                {{end}}
            </td>
            <td class="right aligned">
                {{if ge $pos.UnrealizedPLPercent 0.0}}
                <span class="green-number">{{printf "%.2f%%" $pos.UnrealizedPLPercent}}</span>
                {{else}}
                <span class="red-number">{{printf "%.2f%%" $pos.UnrealizedPLPercent}}</span>
                {{end}}
            </td>
            <td class="right aligned">{{printf "%.8f" $pos.CurrentTakeProfit}}</td>
        </tr>
        {{end}}
        {{else}}
        <tr><td colspan="6" class="center aligned">No active positions.</td></tr>
        {{end}}
        </tbody>
    </table>
</div>
{{end}}
