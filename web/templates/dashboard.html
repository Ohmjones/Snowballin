{{define "content"}}
<h1 class="ui inverted header">
    <i class="snowflake icon"></i>
    <div class="content">
        Bot Dashboard
        <div class="sub header">Live portfolio overview and active positions</div>
    </div>
</h1>

<div class="ui two inverted statistics">
    <div class="statistic">
        <div class="value">
            <i class="dollar sign icon"></i>
            {{printf "%.2f" .PortfolioValue}}
        </div>
        <div class="label">
            Current Account Value ({{.QuoteCurrency}})
        </div>
    </div>
    <div class="{{if ge .TotalUnrealizedPL 0.0}}green{{else}}red{{end}} statistic">
        <div class="value">
            {{printf "%.2f" .TotalUnrealizedPL}}
        </div>
        <div class="label">
            Total Unrealized P/L
        </div>
    </div>
</div>

<div class="ui inverted divider"></div>

<h3 class="ui inverted header">Active Positions ({{len .ActivePositions}})</h3>
{{if .ActivePositions}}
<table class="ui inverted celled selectable table">
    <thead>
    <tr>
        <th>Asset Pair</th>
        <th>Avg. Entry Price</th>
        <th>Total Volume</th>
        <th>Unrealized P/L</th>
        <th>Unrealized P/L %</th>
        <th>Take Profit Price</th>
        <th>Age</th>
    </tr>
    </thead>
    <tbody>
    {{range .ActivePositions}}
    <tr onclick="window.location='/asset/{{.AssetPair | safeURL}}';" style="cursor: pointer;">
        <td>
            <h4 class="ui inverted header">
                <i class="chart area icon"></i>
                <div class="content">{{.AssetPair}}</div>
            </h4>
        </td>
        <td>{{printf "%.4f" .AveragePrice}}</td>
        <td>{{printf "%.6f" .TotalVolume}}</td>
        <td class="{{if ge .UnrealizedPL 0.0}}positive{{else}}negative{{end}}">
            {{printf "%.2f" .UnrealizedPL}}
        </td>
        <td class="{{if ge .UnrealizedPLPercent 0.0}}positive{{else}}negative{{end}}">
            {{printf "%.2f" .UnrealizedPLPercent}}%
        </td>
        <td class="positive">{{printf "%.4f" .CurrentTakeProfit}}</td>
        <td>{{timeSince .EntryTimestamp}}</td>
    </tr>
    {{end}}
    </tbody>
</table>
{{else}}
<div class="ui icon message">
    <i class="info circle icon"></i>
    <div class="content">
        <div class="header">
            No Open Positions
        </div>
        <p>The bot is currently not holding any open positions and is monitoring the markets for entry opportunities.</p>
    </div>
</div>
{{end}}

{{end}}