{{define "content"}}
<h1 class="ui inverted header">
    <i class="bitcoin icon"></i> <div class="content">
    Asset Detail: {{.AssetPair}}
    <div class="sub header">Live position status and technical analysis.</div>
</div>
</h1>

<div class="ui two column stackable grid">
    <div class="column">
        {{if .Position}}
        <div class="ui inverted raised segment">
            <h4 class="ui inverted header">Position Details</h4>
            <div class="ui inverted relaxed divided list">
                <div class="item">
                    <div class="content">
                        <div class="header">Unrealized P/L</div>
                        <span class="{{if ge .Position.UnrealizedPL 0.0}}ui green text{{else}}ui red text{{end}}">
                            {{printf "%.2f (%.2f%%)" .Position.UnrealizedPL .Position.UnrealizedPLPercent}}
                        </span>
                    </div>
                </div>
                <div class="item">
                    <div class="content">
                        <div class="header">Average Entry Price</div>
                        {{printf "%.4f" .Position.AveragePrice}}
                    </div>
                </div>
                <div class="item">
                    <div class="content">
                        <div class="header">Total Volume</div>
                        {{printf "%.6f" .Position.TotalVolume}}
                    </div>
                </div>
                <div class="item">
                    <div class="content">
                        <div class="header">Filled Safety Orders</div>
                        {{.Position.FilledSafetyOrders}}
                    </div>
                </div>
            </div>
        </div>
        {{else}}
        <div class="ui inverted raised segment">
            <h4 class="ui inverted header">No Active Position</h4>
            <p>The bot is currently monitoring this asset for a new entry opportunity.</p>
        </div>
        {{end}}

        <div class="ui inverted raised segment">
            <h4 class="ui inverted header">Automated Analysis</h4>
            <div class="ui inverted relaxed divided list">
                {{range .Analysis}}
                <div class="item">
                    <i class="right triangle icon"></i>
                    <div class="content">
                        <div class="description">{{.}}</div>
                    </div>
                </div>
                {{else}}
                <div class="item">No analysis available.</div>
                {{end}}
            </div>
        </div>
    </div>

    <div class="column">
        <div class="ui inverted raised segment">
            <h4 class="ui inverted header">Live Market Data</h4>
            <div class="ui inverted relaxed divided list">
                <div class="item">
                    <div class="content">
                        <div class="header">Current Price</div>
                        <span style="color: #21ba45; font-size: 1.2em;">{{printf "%.4f" .CurrentPrice}}</span>
                    </div>
                </div>
                {{range $key, $value := .IndicatorValues}}
                <div class="item">
                    <div class="content">
                        <div class="header">{{$key}}</div>
                        {{$value}}
                    </div>
                </div>
                {{end}}
            </div>
        </div>
    </div>
</div>

{{end}}